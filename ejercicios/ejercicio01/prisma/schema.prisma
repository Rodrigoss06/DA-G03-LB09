generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model pasajero {
  id_pasajero      Int       @id @default(autoincrement())
  nombre           String    @db.VarChar(100)
  apellido         String    @db.VarChar(100)
  fecha_nacimiento DateTime  @db.Date
  email            String    @unique @db.VarChar(100)
  telefono         String?   @db.VarChar(15)
  reserva          reserva[]
}

model reserva {
  id_reserva         Int       @id @default(autoincrement())
  id_pasajero        Int?
  id_vuelo           Int?
  precio_final       Decimal   @db.Decimal(10, 2)
  categoria_pasajero String    @db.VarChar(50)
  pasajero           pasajero? @relation(fields: [id_pasajero], references: [id_pasajero], onDelete: Cascade, onUpdate: NoAction)
  vuelo              vuelo?    @relation(fields: [id_vuelo], references: [id_vuelo], onDelete: Cascade, onUpdate: NoAction)
}

model usuario {
  id_usuario         Int            @id @default(autoincrement())
  nombre_completo    String         @db.VarChar(100)
  direccion          String         @db.VarChar(255)
  correo_electronico String         @unique @db.VarChar(100)
  contrasena         String         @db.VarChar(100)
  fecha_nacimiento   DateTime       @db.Date
  sexo               String         @db.VarChar(10)
  aficiones          aficiones[]
  preferencias       preferencias[]
}

model vuelo {
  id_vuelo    Int       @id @default(autoincrement())
  origen      String    @db.VarChar(100)
  destino     String    @db.VarChar(100)
  fecha_vuelo DateTime  @db.Date
  precio_base Decimal   @db.Decimal(10, 2)
  reserva     reserva[]
}

model aficiones {
  id_aficion Int      @id @default(autoincrement())
  id_usuario Int?
  aficion    String   @db.VarChar(50)
  usuario    usuario? @relation(fields: [id_usuario], references: [id_usuario], onDelete: Cascade, onUpdate: NoAction)
}

model matriz {
  id_matriz Int  @id @default(autoincrement())
  valores   Json
}

model preferencias {
  id_preferencia Int      @id @default(autoincrement())
  id_usuario     Int?
  tema_interes   String   @db.VarChar(50)
  usuario        usuario? @relation(fields: [id_usuario], references: [id_usuario], onDelete: Cascade, onUpdate: NoAction)
}
